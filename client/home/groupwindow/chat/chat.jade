template(name="chat")
  section.chat.slcd
    each messages
      unless other
        if typeText
          .message
            unless justEmojis
              img.profileimage(src="{{creator.profile.image}}" title="Du\n{{moment}}")
              .bubble {{#autolink}} {{#emoji}} {{text}} {{/emoji}} {{/autolink}}
            else
              img.profileimage(src="{{creator.profile.image}}" title="Du\n{{moment}}")
              .justemojis {{#emoji}} {{text}} {{/emoji}}
        else if typeLatex
          .message
            img.profileimage(src="{{creator.profile.image}}" title="Du\n{{moment}}")
            .latex-formula
              img(src="http://latex.codecogs.com/gif.latex?{{text}}" title="{{text}}")
      else
        if typeText
          .message.other
            unless justEmojis
              img.profileimage(src="{{creator.profile.image}}" title="{{creator.profile.name}} • {{onlineStatusName creator }}\n{{moment}}")
              .online-status(class="{{onlineStatusIndicator creator}}")
              .bubble {{#autolink}} {{#emoji}} {{text}} {{/emoji}} {{/autolink}}
            else
              img.profileimage(src="{{creator.profile.image}}" title="{{creator.profile.name}} • {{onlineStatusName creator }}\n{{moment}}")
              .online-status(class="{{onlineStatusIndicator creator}}")
              .justemojis {{#emoji}} {{text}} {{/emoji}}
        else if typeLatex
          .message.other
            img.profileimage(src="{{creator.profile.image}}" title="{{creator.profile.name}} • {{onlineStatusName creator }}\n{{moment}}")
            .latex-formula
              img(src="http://latex.codecogs.com/gif.latex?{{text}}" title="{{text}}")

    each users
      if other
        if isTyping
          .message.other
            img.profileimage(src="{{this.profile.image}}" title="{{this.profile.name}} • {{onlineStatusName this }}")
            img.isTyping(src="images/is-typing.gif")
          
    textarea#chat-textarea(rows="1" placeholder="Schreibe eine Nachricht ...")
    .widget-button.emojis-button(title="Emojis" data-widget="emojis") {{> entypo "emoji-flirt"}}
    .widget-button.more-button(title="Mehr" data-widget="more") {{> entypo "dots-three-horizontal"}}
    
    .chat-widget.more-widget
      .button.image-button(title="Bild") {{> entypo "image"}}
      .button.code-button(title="Code") {{> entypo "code"}}
      .button.latex-button(title="LaTeX-Formel") ∑
      .button.file-button(title="Andere Dateien") {{> entypo "documents"}}
    
    .chat-widget.emojis-widget
      +emoji
      
        .emoji-category {{> entypo "user"}} <br> Personen
        each emojis.people
          .emoji-tag(title= this) :{{this}}:
        .emoji-category {{> entypo "flower"}} <br> Natur
        each emojis.nature
          .emoji-tag(title= this) :{{this}}:
        .emoji-category {{> entypo "box"}} <br> Objekte
        each emojis.objects
          .emoji-tag(title= this) :{{this}}:
        .emoji-category {{> entypo "aircraft-take-off"}} <br> Reise
        each emojis.trip
          .emoji-tag(title= this) :{{this}}:
        .emoji-category {{> entypo "language"}} <br> Symbole
        each emojis.symbols
          .emoji-tag(title= this) :{{this}}:
        .emoji-category {{> entypo "star"}} <br> Spezial
        each emojis.special
          .emoji-tag(title= this) :{{this}}:
          
    .chat-widget.latex-widget
      .formula-output
        .title LaTeX-Output:
        .help(title="Hilfe") {{> entypo "help-with-circle"}}
        .latex-output
      .formula-input
        textarea#latex-textarea(placeholder="LaTeX-Formel eingeben ...")
